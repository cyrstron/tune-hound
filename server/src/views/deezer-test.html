<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="manifest" href="/manifest.json">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Deezer Test</title>
</head>
<body>
  <button id='button-play'>Play</button>
  <button id='button-pause'>Pause</button>
  <div id="player"></div>
  <div id="dz-root"></div>
  <script src="https://e-cdns-files.dzcdn.net/js/min/dz.js"></script>
  <script>
    DZ.init({
      appId  : '305804',
      channelUrl : 'http://127.0.0.1:3000/deezer-channel',
      player: {
        container: 'player',
        width : 800,
        height : 300,
        onload : function(){
          DZ.player.playTracks([3135556], () => {});
        }
      }
    });

    function play() {
      DZ.player.setMute(false);
      DZ.player.play();
    }

    function pause() {
      DZ.player.pause();
    }

    document.querySelector('#button-play').addEventListener('click', play);
    document.querySelector('#button-pause').addEventListener('click', pause);
  </script>
  <script>
    
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', function() {
          navigator.serviceWorker.register('/service-worker.js').then(function(registration) {
            // Registration was successful
            console.log('ServiceWorker registration successful with scope: ', registration.scope);
          }).catch(function(err) {
            console.log(err)
          });
        });
      } else {
        console.log('service worker is not supported');
      }
  </script>
</body>
</html>